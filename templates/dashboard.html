{% extends "base.html" %}
{% block title %}Dashboard - Crime Analytics Pro{% endblock %}
{% block content %}
<div class="container">
    <div class="glass-card p-5 mb-4 text-center">
        <h1 class="display-4 fw-bold mb-3"><i class="fas fa-shield-alt me-3"></i>Crime Analytics Pro</h1>
        <p class="lead text-muted">Advanced Crime Data Visualization & Analysis Platform</p>
        <div class="mt-4">
            <span class="badge bg-primary me-2">Real-time</span>
            <span class="badge bg-success me-2">Interactive</span>
            <span class="badge bg-warning me-2">Secure</span>
            <span class="badge bg-info">Analytics</span>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-3">
            <div class="stat-card text-center">
                <i class="fas fa-database fa-3x mb-3"></i>
                <h2 class="display-6 fw-bold">{{ stats.total_records }}</h2>
                <p class="mb-0">Total Records</p>
                <small>Crime Data Entries</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card text-center">
                <i class="fas fa-map-marker-alt fa-3x mb-3"></i>
                <h2 class="display-6 fw-bold">{{ stats.total_states }}</h2>
                <p class="mb-0">States Covered</p>
                <small>Geographical Coverage</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card text-center">
                <i class="fas fa-calendar-alt fa-3x mb-3"></i>
                <h2 class="display-6 fw-bold">{{ stats.years_covered }}</h2>
                <p class="mb-0">Years Data</p>
                <small>Historical Analysis</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card text-center">
                <i class="fas fa-users fa-3x mb-3"></i>
                <h2 class="display-6 fw-bold">{{ stats.total_users }}</h2>
                <p class="mb-0">Active Users</p>
                <small>Platform Engagement</small>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-12">
            <div class="glass-card p-4">
                <h3 class="mb-4"><i class="fas fa-bolt me-2"></i>Quick Actions</h3>
                <div class="row text-center">
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('data_management') }}" class="btn quick-action-btn">
                            <i class="fas fa-upload fa-2x mb-2"></i>
                            <h5>Upload Data</h5>
                            <small>CSV Import</small>
                        </a>
                    </div>
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('visualizations') }}" class="btn quick-action-btn">
                            <i class="fas fa-chart-bar fa-2x mb-2"></i>
                            <h5>Create Viz</h5>
                            <small>12+ Chart Types</small>
                        </a>
                    </div>
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('visualizations', type='bar', auto_refresh=true) }}" class="btn quick-action-btn">
                            <i class="fas fa-sync fa-2x mb-2"></i>
                            <h5>Live Stream</h5>
                            <small>Real-time Viz</small>
                        </a>
                    </div>
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('download_pdf') }}" class="btn quick-action-btn">
                            <i class="fas fa-file-pdf fa-2x mb-2"></i>
                            <h5>Generate PDF</h5>
                            <small>Export Reports</small>
                        </a>
                    </div>
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('audit_logs') }}" class="btn quick-action-btn">
                            <i class="fas fa-history fa-2x mb-2"></i>
                            <h5>View History</h5>
                            <small>Audit Trail</small>
                        </a>
                    </div>
                    <div class="col-md-2 col-6 mb-3">
                        <a href="{{ url_for('profile') }}" class="btn quick-action-btn">
                            <i class="fas fa-user-cog fa-2x mb-2"></i>
                            <h5>Profile</h5>
                            <small>Account Settings</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="glass-card p-4">
                <h4><i class="fas fa-history me-2"></i>Recent Activity</h4>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>Time</th>
                                <th>User</th>
                                <th>Action</th>
                                <th>Details</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for log in recent_logs %}
                            <tr>
                                <td>{{ log.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
                                <td>{{ log.user_id }}</td>
                                <td>
                                    <span class="badge bg-{% if log.action == 'UPDATE' %}warning{% elif log.action == 'DELETE' %}danger{% elif log.action == 'ADD' %}success{% else %}info{% endif %}">
                                        {{ log.action }}
                                    </span>
                                </td>
                                <td>{{ log.table_name or 'N/A' }}</td>
                                <td>{{ log.description or 'No description' }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="glass-card p-4">
                <h4><i class="fas fa-info-circle me-2"></i>System Info</h4>
                <div class="mb-3">
                    <strong>Role:</strong> <span class="badge bg-primary">{{ role }}</span>
                </div>
                <div class="mb-3">
                    <strong>Last Login:</strong> {{ last_login }}
                </div>
                <div class="mb-3">
                    <strong>Current Time:</strong> {{ current_time }}
                </div>
                <div class="mb-3">
                    <strong>Status:</strong> <span class="badge bg-success">Active</span>
                </div>
                <div class="mt-4">
                    <a href="{{ url_for('visualizations') }}" class="btn btn-realistic w-100">
                        <i class="fas fa-rocket me-2"></i>Start Exploring
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}